sudo apt update

sudo apt install docker-compose docker.io wget wireguard-tools -y

echo "Enter admin username [admin]:"
read name

if [ -z "$name" ]; then
  name="admin"
fi

echo "Enter admin password [random]:"
read password

if [ -z "$password" ]; then
  password="$(openssl rand -base64 10)"
fi

export PRIVATE_KEY="$(wg genkey)"

mkdir wg-access-server

cd wg-access-server

wget https://raw.githubusercontent.com/Pqko0/wg-vpn/main/dk -O docker-compose.yml

sed -i 's/WG_ACCESS_USERNAME_HERE/$name/g' docker-compose.yml
sed -i 's/WG_ACCESS_PASSWORD_HERE/$password/g' docker-compose.yml
sed -i 's/WG_ACCESS_KEY_HERE/$PRIVATE_KEY/g' docker-compose.yml

sudo docker-compose up -d

echo "Started WG-Access-Server!"
echo "Admin Name    : $name"
echo "Admin Password: $password"
